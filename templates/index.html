<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üåø –†–æ–¥–æ–≤–æ–π –°–ª–µ–¥</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/variables.css" />
    <link rel="stylesheet" href="/static/css/style.css" />
    <link rel="stylesheet" href="/static/css/tree.css" />
</head>
<body>
    <div class="background-animation">
        <div class="bg-particle bg-particle-1"></div>
        <div class="bg-particle bg-particle-2"></div>
        <div class="bg-particle bg-particle-3"></div>
    </div>
    <header>
        <nav class="navbar">
            <div class="nav-brand">
                <div class="brand-icon">üåø</div>
                <h1>–†–æ–¥–æ–≤–æ–π –°–ª–µ–¥</h1>
            </div>
            <div class="nav-links">
                <button data-section="searchSection" class="nav-btn active" title="–ü–æ–∏—Å–∫">
                    <i class="fas fa-search"></i>
                </button>
                <button data-section="treeSection" class="nav-btn" title="–î–µ—Ä–µ–≤–æ">
                    <i class="fas fa-sitemap"></i>
                </button>
                <button data-section="profileSection" class="nav-btn" title="–ü—Ä–æ—Ñ–∏–ª—å">
                    <i class="fas fa-user"></i>
                </button>
            </div>
        </nav>
    </header>
    <main>
        <!-- –í–ö–õ–ê–î–ö–ê 1: –ü–û–ò–°–ö -->
        <section id="searchSection" class="section active">
            <div class="glass-card">
                <div class="section-header">
                    <h2><i class="fas fa-search"></i> –ü–æ–∏—Å–∫ –≤ –±–∞–∑–µ</h2>
                </div>
                <form id="simpleSearchForm" class="modern-form-grid">
                    <input type="text" id="searchFio" placeholder="–ò–º—è, —Ñ–∞–º–∏–ª–∏—è –∏–ª–∏ –æ—Ç—á–µ—Å—Ç–≤–æ">
                    <select id="searchGender">
                        <option value="">–õ—é–±–æ–π –ø–æ–ª</option>
                        <option value="1">–ú—É–∂—Å–∫–æ–π</option>
                        <option value="0">–ñ–µ–Ω—Å–∫–∏–π</option>
                    </select>
                    <input type="number" id="searchYear" placeholder="–ü—Ä–∏–º–µ—Ä–Ω—ã–π –≥–æ–¥ —Ä–æ–∂–¥–µ–Ω–∏—è">
                    <input type="number" id="searchRange" value="5" min="0" max="20" placeholder="–î–∏–∞–ø–∞–∑–æ–Ω (–ª–µ—Ç)">
                    <button type="submit" class="btn-primary">–ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
                </form>
                <div id="searchResultBox" style="margin-top: 1.5rem;"></div>
            </div>
        </section>

        <!-- –í–ö–õ–ê–î–ö–ê 2: –î–ï–†–ï–í–û -->
        <section id="treeSection" class="section">
            <div class="glass-card">
                <div class="section-header">
                    <h2><i class="fas fa-tree"></i> –ü–æ—Å—Ç—Ä–æ–π—Ç–µ —Å–≤–æ—ë –¥–µ—Ä–µ–≤–æ</h2>
                </div>

                <!-- –û—Å–Ω–æ–≤–Ω–æ–π —á–µ–ª–æ–≤–µ–∫ -->
                <div class="modern-form-grid">
                    <input type="text" id="selfName" placeholder="–í–∞—à–µ –∏–º—è">
                    <input type="text" id="selfSurname" placeholder="–í–∞—à–∞ —Ñ–∞–º–∏–ª–∏—è">
                    <select id="selfGender">
                        <option value="1">–ú—É–∂—Å–∫–æ–π</option>
                        <option value="0">–ñ–µ–Ω—Å–∫–∏–π</option>
                    </select>
                    <input type="number" id="selfBirth" placeholder="–ì–æ–¥ —Ä–æ–∂–¥–µ–Ω–∏—è">
                    <button type="button" class="btn-primary" onclick="addSelf()">–î–æ–±–∞–≤–∏—Ç—å —Å–µ–±—è</button>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
                <div style="margin-top: 2rem; text-align: center;">
                    <button type="button" class="btn-secondary" onclick="addRelativeForm()">
                        + –î–æ–±–∞–≤–∏—Ç—å —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞
                    </button>
                </div>

                <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ñ–æ—Ä–º—ã (–±—É–¥–µ—Ç –∑–∞–º–µ–Ω—è—Ç—å—Å—è) -->
                <div id="relativesFormsContainer" style="margin-top: 1.5rem;"></div>

                <!-- –ö–Ω–æ–ø–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è -->
                <div style="margin-top: 2rem; text-align: center;">
                    <button type="button" class="btn-primary" onclick="buildTree()" style="padding: 1rem 2rem; font-size: 1.1rem;">
                        üå≥ –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–µ—Ä–µ–≤–æ
                    </button>
                </div>
            </div>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –¥–µ—Ä–µ–≤–∞ -->
            <div id="treeContainer" class="tree-container" style="margin-top: 2rem;"></div>
        </section>

        <!-- –í–ö–õ–ê–î–ö–ê 3: –ü–†–û–§–ò–õ–¨ -->
        <section id="profileSection" class="section">
            <!-- –í—Ö–æ–¥ -->
            <div class="glass-card" id="loginForm">
                <div class="section-header">
                    <h2><i class="fas fa-sign-in-alt"></i> –í—Ö–æ–¥</h2>
                </div>
                <div class="modern-form-grid">
                    <input type="email" id="loginEmail" placeholder="Email">
                    <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å">
                    <button type="button" class="btn-primary" onclick="loginUser()">–í–æ–π—Ç–∏</button>
                    <button type="button" class="btn-secondary" onclick="showRegister()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                </div>
            </div>

            <!-- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è -->
            <div class="glass-card" id="registerForm" style="display: none;">
                <div class="section-header">
                    <h2><i class="fas fa-user-plus"></i> –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                </div>
                <div class="modern-form-grid">
                    <input type="text" id="regName" placeholder="–ò–º—è">
                    <input type="text" id="regSurname" placeholder="–§–∞–º–∏–ª–∏—è">
                    <input type="email" id="regEmail" placeholder="Email">
                    <input type="password" id="regPassword" placeholder="–ü–∞—Ä–æ–ª—å">
                    <select id="regGender">
                        <option value="1">–ú—É–∂—Å–∫–æ–π</option>
                        <option value="0">–ñ–µ–Ω—Å–∫–∏–π</option>
                    </select>
                    <button type="button" class="btn-primary" onclick="registerUser()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                    <button type="button" class="btn-secondary" onclick="showLogin()">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
                </div>
            </div>

            <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
            <div class="glass-card" id="userProfile" style="display: none;">
                <div class="section-header">
                    <h2>–ü—Ä–∏–≤–µ—Ç, <span id="userName"></span>!</h2>
                </div>
                <button type="button" class="btn-secondary" onclick="logout()">–í—ã–π—Ç–∏</button>
            </div>
        </section>
    </main>

    <script src="/static/js/api.js"></script>
    <script src="/static/js/simpleSearch.js"></script>
    <script src="/static/js/tree.js"></script>
    <script src="/static/js/auth.js"></script>
    <script src="/static/js/app.js"></script>

    <script>
        window.showLogin = () => {
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('registerForm').style.display = 'none';
            document.getElementById('userProfile').style.display = 'none';
        };
        window.showRegister = () => {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
            document.getElementById('userProfile').style.display = 'none';
        };
    </script>
</body>
</html>